<form #profileForm="ngForm" (ngSubmit)="saveProfile()" class="space-y-5 p-10 overflow-auto max-h-screen bg-white rounded-2xl shadow-md m-5 b-2 border-2 border-indigo-500">
<!-- Informations de base -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="firstname" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
        Prénom<span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        id="firstname"
        name="firstname"
        [(ngModel)]="profileData.firstname"
        class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
        required
        placeholder="Votre prénom"
      >
    </div>
    <div>
      <label for="lastname" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
        Nom<span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        id="lastname"
        name="lastname"
        [(ngModel)]="profileData.lastname"
        class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
        required
        placeholder="Votre nom de famille"
      >
    </div>
  </div>

  <!-- Informations cabinet -->
  <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
    <h4 class="text-base font-medium text-gray-800 dark:text-white mb-3">Informations du cabinet</h4>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label for="company_name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Nom du cabinet
        </label>
        <input
          type="text"
          id="company_name"
          name="company_name"
          [(ngModel)]="profileData.professional.company_name"
          class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          placeholder="Nom de votre cabinet"
        >
      </div>

      <div>
        <label for="medical_identification_number" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                      <span class="flex items-center">
                        Numéro professionnel
                        <button type="button" class="ml-1 text-gray-400 hover:text-gray-500 focus:outline-none" title="Numéro RPPS, ADELI ou autre identifiant professionnel">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </button>
                      </span>
        </label>
        <input
          type="text"
          id="medical_identification_number"
          name="medical_identification_number"
          [(ngModel)]="profileData.professional.medical_identification_number"
          class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          placeholder="RPPS, ADELI ou autre numéro"
        >
      </div>
    </div>

    <!-- Expertise professionnelle -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label for="experience" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Années d'expérience
        </label>
        <div class="relative">
          <input
            type="number"
            id="experience"
            name="experience"
            [(ngModel)]="profileData.professional.experience"
            min="0"
            max="70"
            class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
            placeholder="Ex: 15"
          >
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <span class="text-xs text-gray-500 dark:text-gray-400">ans</span>
          </div>
        </div>
      </div>

      <div>
        <label for="certification" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Certifications
        </label>
        <input
          type="text"
          id="certification"
          name="certification"
          [(ngModel)]="profileData.professional.certification"
          class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          placeholder="Ex: Diplômes, certifications..."
        >
      </div>
    </div>

    <!-- Biographie -->
    <div class="mb-4 relative">
      <label for="biography" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
        Biographie professionnelle
      </label>
      <textarea
        id="biography"
        name="biography"
        rows="3"
        [(ngModel)]="profileData.professional.biography"
        maxlength="500"
        class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all resize-none text-sm"
        placeholder="Décrivez votre parcours, vos spécialités et votre approche..."
      ></textarea>
      <div class="absolute bottom-2 right-2 text-xs text-gray-500 dark:text-gray-400">
        {{ profileData.professional.biography?.length || 0 }}/500
      </div>
    </div>

    <!-- Langues parlées -->
    <div class="mb-4">
      <label for="languages" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
        Langues parlées
      </label>
      <input
        type="text"
        id="languages"
        name="languages"
        [(ngModel)]="languagesInput"
        class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
        placeholder="Ex: français, anglais, espagnol (séparés par des virgules)"
      >
      <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Séparé par des virgules</p>
    </div>

    <!-- Spécialités -->
    <div class="mb-4">
      <label for="specialties" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
        Spécialités
      </label>
      <input
        type="text"
        id="specialties"
        name="specialties"
        [(ngModel)]="specialtiesInput"
        class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
        placeholder="Ex: thérapie cognitive, méditation pleine conscience"
      >
      <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Séparé par des virgules</p>
    </div>
  </div>

  <!-- Contact et adresse -->
  <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
    <h4 class="text-base font-medium text-gray-800 dark:text-white mb-3">Contact et adresse</h4>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Téléphone
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
          </div>
          <input
            type="tel"
            id="phone"
            name="phone"
            [(ngModel)]="profileData.phone"
            class="w-full pl-9 pr-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
            placeholder="01 23 45 67 89"
          >
        </div>
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Email
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="profileData.email"
            class="w-full pl-9 pr-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 cursor-not-allowed text-sm"
            readonly
          >
        </div>
      </div>
    </div>

    <!-- Adresse -->
    <div class="space-y-3">
      <div>
        <label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Adresse
        </label>
        <input
          type="text"
          id="address"
          name="address"
          [(ngModel)]="profileData.address"
          class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          placeholder="123 rue de l'Exemple"
        >
      </div>

      <div>
        <label for="address_complement" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
          Complément d'adresse
        </label>
        <input
          type="text"
          id="address_complement"
          name="address_complement"
          [(ngModel)]="profileData.address_complement"
          class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          placeholder="Bâtiment A, Étage 2, Appartement 203..."
        >
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
        <div>
          <label for="zipcode" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Code postal
          </label>
          <input
            type="text"
            id="zipcode"
            name="zipcode"
            [(ngModel)]="profileData.zipcode"
            class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
            placeholder="75001"
          >
        </div>

        <div>
          <label for="city" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Ville
          </label>
          <input
            type="text"
            id="city"
            name="city"
            [(ngModel)]="profileData.city"
            class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
            placeholder="Paris"
          >
        </div>

        <div>
          <label for="country" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Pays
          </label>
          <select
            id="country"
            name="country"
            [(ngModel)]="profileData.country"
            class="w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-gray-700 dark:bg-gray-700 dark:text-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"
          >
            <option value="France">France</option>
            <option value="Belgique">Belgique</option>
            <option value="Suisse">Suisse</option>
            <option value="Canada">Canada</option>
            <option value="Luxembourg">Luxembourg</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Boutons d'action -->
  <div class="pt-4 flex justify-end gap-3">
    <button
      type="button"
      (click)="resetForm()"
      class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"
    >
      Annuler
    </button>
    <button
      type="submit"
      [disabled]="profileForm.invalid || loading"
      class="px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
    >
      <span *ngIf="!loading">Enregistrer</span>
      <span *ngIf="loading" class="flex items-center justify-center">
                    <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Enregistrement...
                  </span>
    </button>
  </div>
</form>
