<app-navbar></app-navbar>

<!-- Страница страны -->
<div class="w-full px-6 md:px-12 xl:px-6 flex text-center">
  <div class="relative pt-20 pb-2 mx-auto w-full">
    <h1 class="text-4xl font-bold mb-4">Psychologues MindCare</h1>
  </div>
</div>

<!-- Фильры -->
<div class="flex flex-wrap items-center justify-center gap-4 bg-white shadow-md rounded-2xl p-4">
  <div *ngFor="let filter of filters">
    <div class="relative inline-block text-left">
      <button (click)="toggleDropdown(filter.key)"
              class="bg-gray-100 text-black font-medium rounded-xl px-6 py-3 flex items-center space-x-2 w-full">
        <span>{{ filter.label }}</span>
        <svg class="w-4 h-4 transform" [class.rotate-180]="dropdowns[filter.key]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div *ngIf="dropdowns[filter.key]" class="absolute mt-2 bg-white border rounded-xl shadow-lg z-10 w-48">
        <button *ngFor="let option of filter.options"
                (click)="selectOption(filter.key, option)"
                class="block px-4 py-2 w-full text-left hover:bg-gray-100">
          {{ option }}
        </button>
      </div>
    </div>
  </div>
</div>


<!-- Карточка врача -->
<div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
  <div *ngFor="let doctor of paginatedDoctors" class="mt-6 lg:w-96 p-4 md:w-80 sm:w-64 mx-auto border rounded-lg hover:shadow-lg">
    <div class="flex justify-center">
      <p-avatar [image]="doctor.image" class="mr-2" size="xlarge" shape="circle" />
    </div>
    <div class="mt-2 flex justify-center">
      <p>{{ doctor.name }}</p>
    </div>
    <div class="mb-1 flex flex-wrap justify-center gap-2">
      <div class="py-1 px-2 bg-blue-200 rounded">{{ doctor.note }} sur 10</div>
      <div class="py-1 px-2 bg-green-200 rounded">{{ doctor.ans }} ans d'expérience</div>
      <div class="py-1 px-2 bg-gray-200 rounded">{{ doctor.diplome }}</div>
    </div>
    <div class="h-44 overflow-auto">
      <div class="flex justify-center gap-6">
        <button (click)="doctor.activeTab = 'principal'" class="rounded text-xl">Principal</button>
        <button (click)="doctor.activeTab = 'general'" class="rounded text-xl">Général</button>
      </div>
      <hr>
      <div class="mt-4">
        <div *ngIf="doctor.activeTab === 'principal'">
          <h4 class="text-lg font-semibold">Approche psychothérapeutique</h4>
          <p>{{ truncateText(doctor.approche, 35) }}</p>
          <h4 class="text-lg font-semibold">Travaux avec des thèmes</h4>
          <p>{{ truncateText(doctor.travaux, 35) }}</p>
        </div>
        <div *ngIf="doctor.activeTab === 'general'">
          <h4 class="text-lg font-semibold">À propos du spécialiste</h4>
          <p>{{ truncateText(doctor.histoire, 185) }}</p>
        </div>
      </div>
    </div>
    <div class="flex justify-center">
      <p-button label="Voir plus" severity="info" />
    </div>
  </div>
</div>
<div class="flex justify-center my-6">
  <p-button label="Précédent" severity="info" (click)="previousPage()" [disabled]="currentPage === 1"
    class=" px-4 rounded"/>
    <p class="my-auto">{{ currentPage }}</p>
  <p-button label="Suivant" severity="info" (click)="nextPage()" [disabled]="currentPage * pageSize >= doctors.length"
    class=" px-4 rounded"/>
</div>

<app-footer></app-footer>



